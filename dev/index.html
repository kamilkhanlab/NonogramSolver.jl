<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · NonogramSolver.jl</title><meta name="title" content="Home · NonogramSolver.jl"/><meta property="og:title" content="Home · NonogramSolver.jl"/><meta property="twitter:title" content="Home · NonogramSolver.jl"/><meta name="description" content="Documentation for NonogramSolver.jl."/><meta property="og:description" content="Documentation for NonogramSolver.jl."/><meta property="twitter:description" content="Documentation for NonogramSolver.jl."/><meta property="og:url" content="https://kamilkhanlab.github.io/NonogramSolver.jl/"/><meta property="twitter:url" content="https://kamilkhanlab.github.io/NonogramSolver.jl/"/><link rel="canonical" href="https://kamilkhanlab.github.io/NonogramSolver.jl/"/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>NonogramSolver.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li><a class="tocitem" href="#Overview"><span>Overview</span></a></li><li><a class="tocitem" href="#Puzzle-description"><span>Puzzle description</span></a></li><li><a class="tocitem" href="#Method-overview"><span>Method overview</span></a></li><li><a class="tocitem" href="#Installation"><span>Installation</span></a></li><li><a class="tocitem" href="#Examples"><span>Examples</span></a></li><li><a class="tocitem" href="#Importing-from-Web-Paint-by-Number"><span>Importing from Web Paint-by-Number</span></a></li></ul></li><li><a class="tocitem" href="library/">API library</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/kamilkhanlab/NonogramSolver.jl/blob/main/docs/src/index.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="NonogramSolver.jl"><a class="docs-heading-anchor" href="#NonogramSolver.jl">NonogramSolver.jl</a><a id="NonogramSolver.jl-1"></a><a class="docs-heading-anchor-permalink" href="#NonogramSolver.jl" title="Permalink"></a></h1><h2 id="Overview"><a class="docs-heading-anchor" href="#Overview">Overview</a><a id="Overview-1"></a><a class="docs-heading-anchor-permalink" href="#Overview" title="Permalink"></a></h2><p>This package provides a Julia module for formulating <a href="https://en.wikipedia.org/wiki/Nonogram">nonogram puzzles</a> (a.k.a. Picross, paint-by-number, and crucipixel), and for solving these puzzles using integer linear programming (ILP) via <a href="https://jump.dev/JuMP.jl/stable/">JuMP</a>. A <a href="https://doi.org/10.1109/TG.2020.3036687">new effective ILP formulation</a> by Khan is employed. Monochrome and multicolored puzzles are both supported.</p><p>If you make use of this implementation in your own work, please cite the accompanying article:</p><blockquote><p>Kamil A. Khan, Solving nonograms using integer programming without coloring, <em>IEEE Transactions on Games</em>, 14(1): 56-63, 2022. doi:<a href="https://doi.org/10.1109/TG.2020.3036687">10.1109/TG.2020.3036687</a></p></blockquote><p>This solution approach has also been <a href="https://github.com/kamilkhanlab/nonogram-ilp">implemented in GAMS</a>.</p><h2 id="Puzzle-description"><a class="docs-heading-anchor" href="#Puzzle-description">Puzzle description</a><a id="Puzzle-description-1"></a><a class="docs-heading-anchor-permalink" href="#Puzzle-description" title="Permalink"></a></h2><p>The following figure depicts a simple instance of a monochrome puzzle  (left) and its unique solution (right).</p><table border="0"><tr>
<td>
	<figure>
		<img src='examplePrompt.png' style="width: 200px" alt='Simple
		monochrome puzzle'>
	</figure>
</td>
<td>
	<figure>
		<img src='exampleSolution.png' style="width: 200px" alt='Puzzle solution'>
	</figure>
</td>
</tr></table><p>The goal of this puzzle is to color each cell in the grid either filled/black or unfilled/white, consistently with both the <em>row clues</em> to the left and the <em>column clues</em> above the puzzle. Each clue number indicates a series of contiguous black cells in that row/column, in the specified order. For example, the row clues for the 4th row (<code>&quot;1 2&quot;</code>) indicate that the 4th row of the solved puzzle must contain the following, from left to right:</p><ul><li>any number of white cells,</li><li>then 1 black cell,</li><li>then at least 1 white cell,</li><li>then 2 black cells,</li><li>then any number of white cells.</li></ul><p>The column clues are analogous, and describe the column&#39;s contents from top to bottom. The &quot;empty&quot; clue for the 3rd row indicates that this row must contain no black cells at all.</p><p>Simple puzzles may be solved by <em>line solving</em>, which involves deducing as much as possible about the cells in a single row (or column) using only that row&#39;s numerical clues, along with any known colors of that row&#39;s cells. &quot;Real-world&quot; instances are often deliberately designed so that line solving is particularly effective.</p><p>However, in general this problem is NP-complete, and line solving may be completely useless, such as in the following example adapted from <a href="https://webpbn.com/survey/dom.html">Greifer and Wolter</a>:</p><figure>
	<img src='nDom.png' style="width: 300px" alt='Difficult puzzle'>
</figure><p>This puzzle instance has a unique solution (and we find it below), but it cannot be approached by line solving at all.</p><p>In multicolored puzzles, the contiguous filled blocks in each row/column may instead have colors other than black. Thus, each clue number is colored with the color of the corresponding block. Successive blocks of different colors need not be separated by at least one white cell. Intuitively, multicolored puzzles are easier than analogous monochrome puzzles, because there are fewer &quot;red herring&quot; candidate solutions to eliminate.</p><h2 id="Method-overview"><a class="docs-heading-anchor" href="#Method-overview">Method overview</a><a id="Method-overview-1"></a><a class="docs-heading-anchor-permalink" href="#Method-overview" title="Permalink"></a></h2><p>A <a href="https://doi.org/10.1109/TG.2020.3036687">solution approach by Khan</a> formulates the puzzle as an integer linear program (ILP). Unlike previous approaches, this ILP formulation does not refer directly to individual cells&#39; colors, and doesn&#39;t proceed by coloring the cells one by one. In numerical experiments, this approach outperforms previous ILP-based approaches.</p><p>The ILP is a constraint satisfaction problem with three types of constraints:</p><ul><li>for each row (or column), enforcing that each colored block in this row (or column) begins once,</li><li>for each row (or column), enforcing that the blocks in this row (or column) occur in the specified order and don&#39;t overlap, and</li><li>for each cell, ensuring that this cell is colored consistently with its row&#39;s clues and its column&#39;s clues.</li></ul><h2 id="Installation"><a class="docs-heading-anchor" href="#Installation">Installation</a><a id="Installation-1"></a><a class="docs-heading-anchor-permalink" href="#Installation" title="Permalink"></a></h2><p>Install the package with the following command in Julia&#39;s REPL:</p><pre><code class="language-julia hljs">import Pkg; Pkg.add(&quot;NonogramSolver&quot;)</code></pre><h2 id="Examples"><a class="docs-heading-anchor" href="#Examples">Examples</a><a id="Examples-1"></a><a class="docs-heading-anchor-permalink" href="#Examples" title="Permalink"></a></h2><p>Suppose we wish to solve the above puzzles in Julia, and the package is already installed. Let&#39;s tackle the simpler puzzle above. First, load the package:</p><pre><code class="language-julia hljs">using NonogramSolver</code></pre><p>Store the row clues as a <code>Vector{Vector{Int}}</code>, and store the column clues as another <code>Vector{Vector{Int}}</code>:</p><pre><code class="language-julia hljs">rowClues = [[1,1], [1,1], Int[], [1,2], [3]]
colClues = [[1], [2,1], [1], [2,2], [1]]</code></pre><p>(In this representation, the empty 3rd row of clues is indicated as an empty <code>Vector{Int}</code>, which is denoted in Julia as <code>Int[]</code>.) Then, set up a corresponding <a href="library/#NonogramSolver.Puzzle"><code>Puzzle</code></a> object:</p><pre><code class="language-julia hljs">simplePuzzle = Puzzle(rowClues, colClues)</code></pre><p>...and solve it with <a href="library/#NonogramSolver.solve_puzzle"><code>solve_puzzle</code></a>. This sets up an <a href="https://doi.org/10.1109/TG.2020.3036687">integer linear programming (ILP) formulation by Khan</a>, and then solves it using the freely available ILP solver GLPK in JuMP by default:</p><pre><code class="language-julia hljs">simpleSolution = solve_puzzle(simplePuzzle; verbosity=0)</code></pre><p>(If you have access to other ILP solvers such as GUROBI or CPLEX, then you may direct <a href="library/#NonogramSolver.solve_puzzle"><code>solve_puzzle</code></a> to use these instead.) In Julia&#39;s REPL, the above line produces an output that looks like:</p><blockquote>
⬜&#xFE0F;⬛&#xFE0F;⬜&#xFE0F;⬛&#xFE0F;⬜&#xFE0F; <br/>
⬜&#xFE0F;⬛&#xFE0F;⬜&#xFE0F;⬛&#xFE0F;⬜&#xFE0F; <br/>
⬜&#xFE0F;⬜&#xFE0F;⬜&#xFE0F;⬜&#xFE0F;⬜&#xFE0F; <br/>
⬛&#xFE0F;⬜&#xFE0F;⬜&#xFE0F;⬛&#xFE0F;⬛&#xFE0F; <br/>
⬜&#xFE0F;⬛&#xFE0F;⬛&#xFE0F;⬛&#xFE0F;⬜&#xFE0F;
</blockquote><p>Without <code>verbosity=0</code>, we would also see some of JuMP&#39;s performance statistics. This solution may also be: </p><ul><li>displayed using <code>@show simpleSolution</code>, or </li><li>retrieved as a <code>String</code> with <code>repr(simpleSolution)</code>, or </li><li>extracted as a <code>Matrix</code> of <code>1</code>s and <code>0</code>s as <code>simpleSolution.z</code>, which is:<pre><code class="language-julia hljs">5×5 Matrix{Int64}:
 0  1  0  1  0
 0  1  0  1  0
 0  0  0  0  0
 1  0  0  1  1
 0  1  1  1  0</code></pre></li></ul><p>With <code>NonogramSolver.jl</code> already included, we may repeat the above procedure for the second, trickier example above. This looks as follows in the REPL:</p><pre><code class="language-julia-repl hljs">julia&gt; using NonogramSolver

julia&gt; rowClues = [[3], [1], [3,1], [1], [3,1], [1], [3,1], [1], [1]]
9-element Vector{Vector{Int64}}:
 [3]
 [1]
 [3, 1]
 [1]
 [3, 1]
 [1]
 [3, 1]
 [1]
 [1]

julia&gt; colClues = [[1], [1], [1,3], [1], [1,3], [1], [1,3], [1], [3]]
9-element Vector{Vector{Int64}}:
 [1]
 [1]
 [1, 3]
 [1]
 [1, 3]
 [1]
 [1, 3]
 [1]
 [3]

julia&gt; trickyPuzzle = Puzzle(rowClues, colClues);

julia&gt; solve_puzzle(trickyPuzzle; verbosity=0)

⬜⬜⬜⬜⬜⬜⬛⬛⬛
⬜⬜⬜⬜⬜⬜⬜⬜⬛
⬜⬜⬜⬜⬛⬛⬛⬜⬛
⬜⬜⬜⬜⬜⬜⬛⬜⬜
⬜⬜⬛⬛⬛⬜⬛⬜⬜
⬜⬜⬜⬜⬛⬜⬜⬜⬜
⬛⬛⬛⬜⬛⬜⬜⬜⬜
⬜⬜⬛⬜⬜⬜⬜⬜⬜
⬜⬜⬛⬜⬜⬜⬜⬜⬜</code></pre><p>That final output looks much better in the REPL itself, where it looks like:</p><blockquote>
⬜&#xFE0F;⬜&#xFE0F;⬜&#xFE0F;⬜&#xFE0F;⬜&#xFE0F;⬜&#xFE0F;⬛&#xFE0F;⬛&#xFE0F;⬛&#xFE0F; <br/>
⬜&#xFE0F;⬜&#xFE0F;⬜&#xFE0F;⬜&#xFE0F;⬜&#xFE0F;⬜&#xFE0F;⬜&#xFE0F;⬜&#xFE0F;⬛&#xFE0F; <br/>
⬜&#xFE0F;⬜&#xFE0F;⬜&#xFE0F;⬜&#xFE0F;⬛&#xFE0F;⬛&#xFE0F;⬛&#xFE0F;⬜&#xFE0F;⬛&#xFE0F; <br/>
⬜&#xFE0F;⬜&#xFE0F;⬜&#xFE0F;⬜&#xFE0F;⬜&#xFE0F;⬜&#xFE0F;⬛&#xFE0F;⬜&#xFE0F;⬜&#xFE0F; <br/>
⬜&#xFE0F;⬜&#xFE0F;⬛&#xFE0F;⬛&#xFE0F;⬛&#xFE0F;⬜&#xFE0F;⬛&#xFE0F;⬜&#xFE0F;⬜&#xFE0F; <br/>
⬜&#xFE0F;⬜&#xFE0F;⬜&#xFE0F;⬜&#xFE0F;⬛&#xFE0F;⬜&#xFE0F;⬜&#xFE0F;⬜&#xFE0F;⬜&#xFE0F; <br/>
⬛&#xFE0F;⬛&#xFE0F;⬛&#xFE0F;⬜&#xFE0F;⬛&#xFE0F;⬜&#xFE0F;⬜&#xFE0F;⬜&#xFE0F;⬜&#xFE0F; <br/>
⬜&#xFE0F;⬜&#xFE0F;⬛&#xFE0F;⬜&#xFE0F;⬜&#xFE0F;⬜&#xFE0F;⬜&#xFE0F;⬜&#xFE0F;⬜&#xFE0F; <br/>
⬜&#xFE0F;⬜&#xFE0F;⬛&#xFE0F;⬜&#xFE0F;⬜&#xFE0F;⬜&#xFE0F;⬜&#xFE0F;⬜&#xFE0F;⬜&#xFE0F;
</blockquote><p>This is indeed the correct unique solution. For puzzles with multiple solutions, only one solution will be generated. If it&#39;s impossible to satisfy the row clues and column clues simultaneously, then no solution exists, and a completely white/unfilled grid will be produced to indicate this.</p><h2 id="Importing-from-Web-Paint-by-Number"><a class="docs-heading-anchor" href="#Importing-from-Web-Paint-by-Number">Importing from Web Paint-by-Number</a><a id="Importing-from-Web-Paint-by-Number-1"></a><a class="docs-heading-anchor-permalink" href="#Importing-from-Web-Paint-by-Number" title="Permalink"></a></h2><p>Puzzles may also be imported from <a href="https://webpbn.com">Web Paint-by-Number</a> as follows:</p><ol><li>In <a href="https://webpbn.com/export.cgi">Web Paint-by-Number&#39;s export form</a>, specify the desired puzzle ID,  choose &quot;.CWC file&quot; as the desired output format, and hit the <code>Export</code> button at the bottom.</li><li>Save the exported text in your working directory, as e.g. <code>puzzle.cwc</code>.</li><li>In Julia, after importing this module and <code>using NonogramSolver</code>, import the CWC file as a <a href="library/#NonogramSolver.Puzzle"><code>Puzzle</code></a> object using <a href="library/#NonogramSolver.read_puzzle_from_cwc-Tuple{String}"><code>read_puzzle_from_cwc</code></a>:<pre><code class="language-julia hljs">puzzle = read_puzzle_from_cwc(&quot;puzzle.cwc&quot;)</code></pre></li><li>Then solve this puzzle:<pre><code class="language-julia hljs">puzzleSolution = solve_puzzle(puzzle)</code></pre></li></ol></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="library/">API library »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.4.0 on <span class="colophon-date" title="Thursday 18 April 2024 05:16">Thursday 18 April 2024</span>. Using Julia version 1.10.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
